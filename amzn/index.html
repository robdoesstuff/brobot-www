<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <script>
        function fill() {
            let title = "Unknown Product";
            let asin = "";
            let aoid = "";
            let query = window.location.search.substring(1);
            let vars = query.split("&");
            for (var i=0;i<vars.length;i++) {
                var pair = vars[i].split("=");
                if(pair[0] === "t"){title = decodeURIComponent(pair[1]).replace('+', ' ')}
                else if(pair[0] === "a"){asin = decodeURIComponent(pair[1])}
                else if(pair[0] === "ao"){aoid = decodeURIComponent(pair[1])}
            }
            let tag = "realbrobot-20";
            if (asin !== "") {
                let productLink = "https://www.amazon.com/dp/" + asin + "?tag=" + tag;
                let offersLink = "https://www.amazon.com/gp/offer-listing/" + asin + "/ref=olp_f_new?f_new=true&tag=" + tag;
                let atcLink = "https://www.amazon.com/gp/aws/cart/add.html?ASIN.1=" + asin + "&Quantity.1=1&tag=" + tag;
                if (aoid !== "") {
                    atcLink = "https://www.amazon.com/gp/aws/cart/add.html?OfferListingId.1=" + aoid + "&Quantity.1=1&tag=" + tag;
                }
                document.getElementById("product-title").innerHTML = "<a href=\"" + productLink + "\">" + title + "</a>";
                document.getElementById("product-link").innerHTML = "<a href=\"" + productLink + "\">Check Product Availability</a>";
                document.getElementById("offers-link").innerHTML = "<a href=\"" + offersLink + "\">Check Marketplace Offers</a>";
                document.getElementById("atc-link").innerHTML = "<a href=\"" + atcLink + "\">Add To Cart</a>";
            }
        }
    </script>
</head>
<body onload="fill();">
    <div id="content">
        <div id="title">Brobot Amazon Links</div>
        <div id="product-title">Unknown Product</div>
        <div id="product-link"></div>
        <div id="offers-link"></div>
        <div id="atc-link"></div>
        <div id="footer">As an Amazon Associate I earn from qualifying purchases. Availability and pricing are subject to change.</div>
    </div>
</body>
</html>